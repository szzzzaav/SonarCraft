const inputData = {
  B5: [
    "1.0",
    "2.5",
    "4.0",
    "7.0",
    "8.5",
    "10.0",
    "13.11",
    "14.5",
    "16.0",
    "19.11",
    "20.5",
    "97.21",
    "101.5",
    "104.5",
    "107.0",
    "119.88",
    "133.0",
    "133.0",
    "145.0",
    "156.16",
    "157.0",
    "158.0",
    "158.5",
    "159.5",
    "160.0",
    "161.0",
    "163.0",
    "163.0",
    "163.0",
    "164.0",
    "164.5",
    "164.5",
    "165.5",
    "165.5",
    "166.0",
    "166.5",
    "167.5",
    "168.5",
    "169.0",
    "170.0",
    "171.0",
    "172.0",
    "173.0",
    "173.5",
    "174.0",
    "174.5",
    "175.0",
  ],
  E6: ["4.75", "10.75", "16.75", "22.75", "108.0", "119.75", "136.0", "148.0", "156.28"],
  "C#6": [
    "2.0",
    "3.5",
    "5.5",
    "8.0",
    "9.5",
    "11.5",
    "14.0",
    "15.5",
    "17.5",
    "20.0",
    "21.5",
    "23.5",
    "100.32",
    "119.83",
    "139.0",
    "156.21",
    "157.0",
    "160.0",
    "161.5",
    "162.5",
    "162.5",
  ],
  "G#5": [
    "4.0",
    "10.0",
    "16.0",
    "22.0",
    "109.21",
    "110.5",
    "118.0",
    "119.95",
    "131.5",
    "136.0",
    "137.5",
    "138.5",
    "142.0",
    "148.0",
    "156.09",
    "179.5",
  ],
  "D#6": [
    "1.0",
    "4.0",
    "5.0",
    "7.0",
    "10.0",
    "11.0",
    "13.21",
    "16.0",
    "17.0",
    "19.21",
    "22.0",
    "23.0",
    "107.5",
    "108.5",
    "119.78",
    "149.5",
    "156.25",
  ],
  G6: ["119.67", "152.5", "156.35"],
  "G#6": ["119.65", "154.0", "156.37"],
  "F#6": [
    "119.7",
    "133.5",
    "135.0",
    "139.5",
    "141.0",
    "145.5",
    "147.0",
    "155.5",
    "156.32",
    "156.5",
  ],
  "D#7": [
    "133.0",
    "136.0",
    "137.0",
    "139.0",
    "142.0",
    "143.0",
    "144.25",
    "145.0",
    "148.0",
    "150.5",
    "151.0",
    "151.5",
    "152.25",
  ],
  "C#7": [
    "119.53",
    "134.0",
    "135.5",
    "137.5",
    "138.5",
    "140.0",
    "141.5",
    "144.5",
    "146.0",
    "147.5",
  ],
  B6: ["119.58", "134.5", "146.5", "156.5"],
  E7: ["119.5", "136.75", "142.75", "144.0", "148.75", "150.0"],
  "F#7": ["140.5", "143.5", "149.0", "155.5"],
  G7: ["149.5", "152.5", "153.0", "153.5"],
  "G#7": ["154.0"],
  B4: [
    "25.0",
    "26.5",
    "28.0",
    "29.5",
    "31.0",
    "32.5",
    "34.0",
    "35.5",
    "37.0",
    "38.5",
    "43.0",
    "44.5",
    "49.0",
    "50.0",
    "55.0",
    "58.0",
    "59.0",
    "59.5",
    "61.0",
    "62.5",
    "64.0",
    "65.5",
    "67.0",
    "68.5",
    "73.0",
    "74.5",
    "79.0",
    "80.5",
    "85.0",
    "86.0",
    "91.0",
    "94.0",
    "95.0",
    "95.5",
    "97.0",
    "103.0",
    "106.0",
    "109.11",
    "115.0",
    "116.0",
    "116.5",
    "117.5",
    "120.17",
    "121.0",
    "122.5",
    "124.0",
    "125.5",
    "133.0",
    "133.0",
    "134.5",
    "136.0",
    "136.0",
    "142.0",
    "144.5",
    "145.0",
    "145.0",
    "146.5",
    "148.0",
    "148.0",
    "154.0",
    "154.0",
    "155.0",
    "155.89",
    "158.5",
    "159.5",
    "163.0",
    "164.5",
    "165.5",
    "166.0",
    "167.5",
    "169.0",
    "170.5",
    "172.0",
    "173.5",
    "175.0",
    "178.0",
    "179.5",
    "181.0",
  ],
  "D#5": [
    "89.5",
    "95.5",
    "115.0",
    "116.0",
    "116.5",
    "120.08",
    "131.5",
    "133.0",
    "133.0",
    "134.5",
    "145.0",
    "145.0",
    "146.5",
    "149.5",
    "154.0",
    "155.98",
    "163.0",
    "164.5",
    "165.5",
    "175.0",
    "178.0",
    "181.0",
  ],
  "F#5": [
    "1.0",
    "7.0",
    "13.0",
    "19.0",
    "23.5",
    "100.11",
    "102.5",
    "104.0",
    "105.5",
    "112.0",
    "114.5",
    "115.0",
    "116.5",
    "120.0",
    "130.0",
    "132.5",
    "133.0",
    "133.0",
    "134.5",
    "138.75",
    "145.0",
    "156.05",
    "160.0",
    "163.0",
    "164.5",
    "165.5",
    "166.0",
    "167.5",
    "175.0",
  ],
  E5: [
    "95.0",
    "97.1",
    "111.5",
    "120.05",
    "136.0",
    "138.0",
    "148.0",
    "156.0",
    "157.0",
    "163.0",
    "166.0",
    "173.5",
    "179.5",
  ],
  "F#4": [
    "1.0",
    "7.0",
    "13.0",
    "19.0",
    "25.0",
    "26.5",
    "31.0",
    "32.5",
    "34.0",
    "35.5",
    "40.0",
    "41.5",
    "43.0",
    "44.5",
    "46.0",
    "47.5",
    "50.5",
    "51.0",
    "56.5",
    "57.0",
    "58.0",
    "59.0",
    "59.5",
    "61.0",
    "62.5",
    "67.0",
    "68.5",
    "70.0",
    "71.5",
    "76.0",
    "77.5",
    "79.0",
    "80.5",
    "82.0",
    "83.5",
    "86.5",
    "87.0",
    "92.5",
    "93.0",
    "94.0",
    "95.0",
    "95.5",
    "96.5",
    "100.1",
    "120.3",
    "127.0",
    "128.0",
    "130.0",
    "133.5",
    "135.5",
    "139.0",
    "139.0",
    "140.5",
    "145.0",
    "146.0",
    "146.5",
    "147.5",
    "155.5",
    "155.78",
    "160.0",
    "161.0",
    "161.5",
    "162.0",
    "167.5",
    "169.0",
    "175.0",
    "176.5",
    "178.0",
    "179.0",
    "181.0",
  ],
  "C#5": [
    "100.0",
    "103.5",
    "112.0",
    "113.5",
    "118.0",
    "120.12",
    "130.0",
    "134.0",
    "139.0",
    "139.0",
    "142.0",
    "155.5",
    "155.93",
    "160.0",
    "161.0",
    "161.5",
    "162.5",
    "176.5",
  ],
  "G#4": [
    "28.0",
    "29.5",
    "37.0",
    "38.5",
    "49.0",
    "52.0",
    "53.5",
    "55.0",
    "64.0",
    "65.5",
    "73.0",
    "74.5",
    "85.0",
    "89.0",
    "89.5",
    "90.5",
    "91.0",
    "106.0",
    "109.0",
    "111.0",
    "118.0",
    "120.25",
    "121.0",
    "122.5",
    "124.0",
    "125.5",
    "131.5",
    "136.0",
    "137.5",
    "138.5",
    "142.0",
    "142.0",
    "144.5",
    "148.0",
    "154.0",
    "154.0",
    "155.0",
    "155.82",
    "157.0",
    "158.5",
    "159.5",
    "168.5",
    "170.5",
    "179.5",
    "180.0",
  ],
  G5: ["119.97", "149.5", "156.07", "173.5"],
  "A#5": ["100.21", "102.0", "105.0", "112.0", "114.0", "119.9", "132.5", "149.5", "156.14"],
  B3: [
    "1.0",
    "4.0",
    "7.0",
    "10.0",
    "13.0",
    "16.0",
    "19.0",
    "22.0",
    "25.0",
    "26.0",
    "26.5",
    "27.0",
    "28.0",
    "29.0",
    "29.5",
    "30.5",
    "31.0",
    "32.0",
    "32.5",
    "33.5",
    "34.0",
    "35.0",
    "35.5",
    "36.5",
    "37.0",
    "38.0",
    "38.5",
    "39.5",
    "43.0",
    "44.0",
    "44.5",
    "45.5",
    "46.0",
    "47.0",
    "47.5",
    "48.5",
    "49.0",
    "50.0",
    "52.0",
    "53.0",
    "53.5",
    "54.5",
    "55.0",
    "55.5",
    "58.0",
    "59.0",
    "59.5",
    "60.0",
    "61.0",
    "62.0",
    "62.5",
    "63.0",
    "64.0",
    "65.0",
    "65.5",
    "66.5",
    "67.0",
    "68.0",
    "68.5",
    "69.5",
    "70.0",
    "71.0",
    "71.5",
    "72.5",
    "73.0",
    "74.0",
    "74.5",
    "75.5",
    "79.0",
    "80.0",
    "80.5",
    "81.5",
    "82.0",
    "83.0",
    "83.5",
    "84.5",
    "85.0",
    "86.0",
    "90.0",
    "91.0",
    "91.5",
    "94.0",
    "95.0",
    "95.5",
    "96.0",
    "97.0",
    "100.0",
    "106.0",
    "109.1",
    "121.0",
    "122.0",
    "122.5",
    "123.5",
    "124.0",
    "125.0",
    "125.5",
    "126.5",
    "133.0",
    "135.0",
    "137.0",
    "138.0",
    "145.0",
    "145.5",
    "147.0",
    "149.0",
    "155.61",
    "157.0",
    "157.5",
    "158.5",
    "159.5",
    "163.0",
    "164.0",
    "164.5",
    "165.5",
    "167.0",
    "168.0",
    "169.0",
    "169.5",
    "170.5",
    "171.5",
    "172.0",
    "172.5",
    "173.5",
    "174.5",
    "175.0",
    "178.0",
    "178.5",
    "180.5",
  ],
  "D#4": [
    "25.0",
    "26.5",
    "27.5",
    "31.0",
    "32.5",
    "34.0",
    "35.5",
    "43.0",
    "44.5",
    "46.0",
    "47.5",
    "51.5",
    "52.0",
    "53.5",
    "58.0",
    "59.5",
    "61.0",
    "62.5",
    "63.5",
    "67.0",
    "68.5",
    "70.0",
    "71.5",
    "79.0",
    "80.5",
    "82.0",
    "83.5",
    "87.5",
    "89.0",
    "94.0",
    "95.5",
    "103.0",
    "106.0",
    "115.5",
    "117.0",
    "120.38",
    "142.0",
    "144.5",
    "145.0",
    "146.5",
    "149.5",
    "151.0",
    "151.5",
    "152.5",
    "153.0",
    "153.5",
    "154.0",
    "154.5",
    "155.7",
    "158.0",
    "159.0",
    "178.0",
    "181.0",
  ],
  E4: [
    "28.0",
    "29.5",
    "37.0",
    "38.5",
    "49.0",
    "55.0",
    "56.0",
    "59.0",
    "64.0",
    "65.5",
    "73.0",
    "74.5",
    "85.0",
    "91.0",
    "92.0",
    "95.0",
    "97.1",
    "109.21",
    "120.35",
    "121.0",
    "122.5",
    "124.0",
    "125.5",
    "136.0",
    "141.5",
    "148.0",
    "155.73",
    "157.0",
    "169.0",
    "170.0",
    "170.5",
    "171.0",
    "172.0",
    "173.0",
    "174.0",
  ],
  "C#4": [
    "40.0",
    "41.0",
    "41.5",
    "42.5",
    "50.5",
    "51.0",
    "51.5",
    "56.5",
    "57.5",
    "76.0",
    "77.0",
    "77.5",
    "78.5",
    "86.5",
    "87.0",
    "87.5",
    "92.5",
    "93.5",
    "112.0",
    "120.5",
    "127.0",
    "140.0",
    "140.5",
    "141.0",
    "143.0",
    "143.5",
    "150.0",
    "155.66",
    "160.5",
    "161.5",
    "162.5",
  ],
  "A#4": [
    "40.0",
    "41.5",
    "50.5",
    "56.5",
    "76.0",
    "77.5",
    "86.5",
    "92.5",
    "100.21",
    "112.0",
    "120.2",
    "130.0",
    "132.5",
    "141.0",
    "149.5",
    "150.5",
    "151.0",
    "152.5",
    "153.0",
    "155.86",
    "160.0",
    "176.5",
  ],
  A4: ["46.0", "47.5", "82.0", "83.5", "120.22", "155.84"],
  F5: ["118.0", "120.03", "156.03"],
  D7: ["119.5"],
  C7: ["119.55"],
  "A#6": ["119.6", "156.41"],
  A6: ["119.62", "156.39"],
  F6: ["119.72", "156.3"],
  D6: ["119.8", "156.23"],
  C6: ["119.85", "156.19"],
  A5: ["119.92", "156.12"],
  D5: ["120.1", "155.96"],
  C5: ["120.15", "155.91"],
  G4: ["120.28", "149.5", "151.0", "152.0", "152.5", "155.8", "172.0"],
  F4: ["120.33", "155.75"],
  D4: ["120.4", "155.68"],
  "F#3": [
    "25.5",
    "31.5",
    "33.0",
    "34.5",
    "36.0",
    "40.0",
    "40.5",
    "42.0",
    "43.5",
    "45.0",
    "46.5",
    "48.0",
    "50.5",
    "51.0",
    "56.5",
    "61.5",
    "67.5",
    "69.0",
    "70.5",
    "72.0",
    "76.0",
    "76.5",
    "78.0",
    "79.5",
    "81.0",
    "82.5",
    "84.0",
    "86.5",
    "87.0",
    "92.5",
    "127.0",
    "127.5",
    "130.0",
    "134.5",
    "139.0",
    "139.5",
    "140.5",
    "141.5",
    "146.5",
    "155.5",
    "155.5",
    "160.0",
    "163.5",
    "166.5",
    "167.5",
    "168.5",
  ],
  G3: ["152.5", "155.52"],
  "G#3": [
    "52.5",
    "54.0",
    "88.5",
    "90.0",
    "106.0",
    "131.5",
    "142.0",
    "142.5",
    "144.0",
    "154.0",
    "155.54",
  ],
  A3: ["155.57"],
  "A#3": ["132.5", "155.59", "176.5"],
  C4: ["155.64"],
  E3: [
    "4.0",
    "10.0",
    "16.0",
    "22.0",
    "28.5",
    "30.0",
    "37.5",
    "39.0",
    "49.0",
    "49.5",
    "55.0",
    "64.5",
    "66.0",
    "73.5",
    "75.0",
    "85.0",
    "85.5",
    "91.0",
    "109.0",
    "112.0",
    "121.5",
    "123.0",
    "124.5",
    "126.0",
    "136.0",
    "136.5",
    "137.5",
    "138.5",
    "148.0",
    "148.5",
    "157.0",
    "169.0",
    "172.0",
    "179.5",
  ],
  B2: [
    "25.0",
    "31.0",
    "43.0",
    "46.0",
    "58.0",
    "60.5",
    "61.0",
    "67.0",
    "79.0",
    "82.0",
    "94.0",
    "133.0",
    "145.0",
    "163.0",
    "166.0",
    "175.0",
    "178.0",
    "181.0",
  ],
  E2: [
    "28.0",
    "37.0",
    "49.0",
    "55.0",
    "64.0",
    "73.0",
    "85.0",
    "91.0",
    "121.0",
    "136.0",
    "148.0",
    "157.0",
    "169.0",
    "172.0",
    "179.5",
  ],
  "F#2": [
    "40.0",
    "50.5",
    "56.5",
    "76.0",
    "86.5",
    "92.5",
    "127.0",
    "130.0",
    "139.0",
    "155.5",
    "160.0",
  ],
  "G#2": ["52.0", "88.0", "106.0", "131.5", "142.0", "154.0"],
  "D#3": ["103.0", "115.0", "149.5", "150.5", "151.0"],
  "C#2": ["118.0", "118.5", "119.0", "119.5", "120.0", "120.5"],
  "C#3": ["118.0", "118.5", "119.0", "119.5", "120.0", "120.5"],
  "A#2": ["132.5", "176.5"],
  "D#2": ["149.5", "151.0"],
  G2: ["152.5"],
  B1: ["181.0"],
};

export const fun = () => {
  // 生成随机颜色
  const getRandomColor = () =>
    "#" +
    Math.floor(Math.random() * 16777215)
      .toString(16)
      .padStart(6, "0");

  // 计算最大时间
  let maxTime = Math.max(
    ...Object.values(inputData)
      .flat()
      .map((t) => parseFloat(t as string))
  );

  // 计算数组长度（时间精度0.25s）
  const timeInterval = 0.25;
  const arrayLength = Math.ceil(maxTime / timeInterval) + 1;

  // 生成instruments数组
  const instruments = Object.entries(inputData).map(([pitch, times]) => {
    const data = new Array(arrayLength).fill(0);

    (times as string[]).forEach((t) => {
      const time = parseFloat(t);
      const index = Math.round(time / timeInterval);
      if (index < arrayLength) data[index] = 1;
    });

    return {
      name: `piano-${pitch}`,
      color: getRandomColor(),
      data,
      instrument: "piano",
      pitch,
    };
  });

  // 输出结果
  return instruments;
};
